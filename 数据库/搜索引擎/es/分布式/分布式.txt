Cluster 集群
	1. 集群是一个或多个节点的集合，并提供跨所有节点的联合索引和搜索功能。
	
	2. 一个集群有一个唯一的名称标识
		默认是"elasticsearch"。
	附：
		对于中小型应用来说，刚开始一个集群就一个节点。
	？

		集群具体概念是什么了！
		集群就是一个es隔离环境，集群间不能交互吧
			不不不，es应该是根据集群来提供功能的，比如你得确定要从那个集群中查找索引、进行全文检索等。
	
Node 节点
	节点是一个单独的服务器，它是集群的一部分。
		？
			分片太大一个节点只能一个分片，有这种情况吗
	多节点：
		Elasticsearch集群中，所有的node都是对等的色。
		所有的node都能接收请求，并能自动转请求到相应的节点上(数据路由)，最后能将其他节点处理的数据进行响应收集，返回给客户端。

		master节点：
			1.当ES 集群有多个节点，会自动选举一个节点为 master 节点。
			要是 master 节点宕机了，那么会重新选举一个节点为 master 节点。
			2. master的职责多-些，需要管理与维护集群的元数据？,
			索引的创建与删除、节点的增加和删除，它都会收到相应的请求，然后进行相应的数据维护。
			附：
				master node在承担索引、搜索请求时，与其他node-起分摊，并不承担所有的请求，因而不存在单点故障这个问题。	
				master节点功能：
					...
					这个 master 节点其实就是干一些管理的工作的，比如维护索引元数据、负责切换 primary shard 和 replica shard 身份等。
				
					如果是非 master 节点宕机了，那么会由 master 节点，让那个宕机节点上的 primary shard 的身份转移到其他机器上的 replica shard。
					接着你要是修复了那个宕机机器，重启了之后，master 节点会控制将缺失的 replica shard 分配过去，同步后续修改的数据之类的，让集群恢复正常。
			例：
				https://www.yuque.com/yanyulou-jxe2g/iz0eoq/cfr02m#qvxe8
				./master选举案例.png

	附：
		一个节点有一个唯一名称标识.
			默认随机分配。
				默认情况下，该名称是在启动时分配给节点的随机通用唯一标识符(UUID)。
			如果不想用默认的节点名，可以定义任何想要的节点名。
			附：
				这个名称对于管理来说很重要。
					例：你希望识别网络中的哪些服务器对应于你的Elasticsearch集群中的哪些节点。
		一个节点可以通过配置集群名称来加入到一个特定的集群中。
			默认情况下，每个节点都被设置加入到一个名字叫"elasticsearch"的集群中。
			
		节点和分片区别：
			节点是一台节点服务器。
			分片是部分索引，所有分片组合起来就是一个完整索引，分片也是一个完整独立索引具备索引所有功能。
			所以节点下包含多个分片。



shard：(primary shard)
	一个索引可能存储大量数据，这些数据可能超过单个节点的硬件限制。shard的目的就是把一个索引下的数据分布到多个节点上，提高性能。
		例如，一个包含10亿条文档占用1TB磁盘空间的索引可能不适合在单个节点上，或者可能太慢而不能单独处理来自单个节点的搜索请求。
	ES 可以将一个索引中的数据切分为多个 shard，自动均衡分布在多台服务器上存储。
		即
		1. 在创建索引时
			1.
			primary shard的默认数量是5，replica默认是1.(1副本是对主分片而言)
			即默认有10个shard, 5个primary shard, 5个replica shard
			2.
			当然你也可以自定义所需的分片数量。
			附：
				1. primary shard的数量在创建索引的时候就固定了，replica shard的数量可以随时修改
				附：
				
					为啥primary shard的数量在创建索引的时候就固定了：
						类似数据库分表分库根据id值hash取模。
						es数据存储时要根据分片数取模(shard = hash(routing) % number. _of_ primary_ shards)，决定存储到那个分片中。
						如果改变了分片数,那么所有数据的路由地址都要重新变更，因此分片数一般不能变化。

					那为什么副可以变了！
						不是根据取模找地址吗，那分片宕机是如何找到对应的副本了...
				2. 虽然无法为索引动态新增分片，但你可以重新创建索引，然后把数据导过去。！
		2. 在增减节点时，shard会自动在nodes中负载均衡。
			？例：
				https://www.yuque.com/yanyulou-jxe2g/iz0eoq/cfr02m#cdWXU
				？案例3为什么副会有两个了，？p是自动均衡分配到3个上的
			？
				当过5索引时，有节点没有该索引吗
				？如何知道那个各自分布情况了
		每个shard都是一一个最小工作单元，承载部分数据，lcne实例，完整的建立索引和处理请求的能力

	注：
		每个shard都是一个lucene index(lucene实例)，具备完整的建立索引和处理请求的能力。！
		每个shard也是es的一个最小工作单元，承载索引部分数据。
			即每个分片本身就是一个功能完全独立的“索引”，可以驻留在集群中的任何节点上。
	拆分多个 shard 好处：
		一 支持横向扩展(水平地分割/扩展内容卷)
			比如你数据量是 3T，3 个 shard，每个 shard 就 1T 的数据。
			若现在数据量增加到 4T，怎么扩展，很简单，重新建一个有 4 个 shard 的索引，将数据导进去；
		二 提高性能(跨分片并行操作，从而提高性能和吞吐量)
			数据分布在多个 shard，即多台服务器上，所有的操作，都会在多台机器上并行分布式执行，提高了吞吐量和性能。
	？
		一个节点可以存储多个索引，一个索引可以被切分为多个分片，那分片和节点的关系是什么了？
replica:(replica shard)
	任何一个服务器随时可能故障或宕机，此时 shard 可能就会丢失，因此可以为每个 shard 创建多个 replica 副本。
		即每个 shard 都有一个 primary shard ，负责写入数据，还可有几个 replica shard，提升搜索操作的吞吐量和性能 。 
		primary shard 写入数据之后，会将数据同步到其他几个 replica shard 上去。
	附：
		replica作用：
			高可用
			提高搜索量/吞吐量
			?
				是如何提高吞吐量的，任一节点收到查询请求，是如何决定分到那个副本节点来提高效率吗
		创建索引时：
			在创建索引时，可以为索引指定副本的数量（默认为1）。
			创建索引后，副本的数量可以随时动态地更改。
			
			

ES并发控制原理
	https://www.yuque.com/yanyulou-jxe2g/iz0eoq/cfr02m#ChenQ	